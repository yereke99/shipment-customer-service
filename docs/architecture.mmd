flowchart LR
  subgraph EXT[External]
    C[Client]
    UI[Jaeger UI :16686]
  end

  subgraph NET[Docker network internal]
    E[Envoy :8080 REST, :9090 gRPC]
    S[shipment-service :8080]
    CS[customer-service :9090]
    DB[Postgres :5432]
    OC[otel-collector :4317]
    J[Jaeger]
  end

  C -->|HTTP /api/v1/*| E
  E -->|HTTP :8080| S
  S -->|gRPC via Envoy :9090| E
  E -->|customer.CustomerService/*| CS
  CS -->|SQL| DB

  S -->|OTLP traces| OC
  CS -->|OTLP traces| OC
  E -->|OTLP traces| OC
  OC -->|OTLP| J

  UI --> J
